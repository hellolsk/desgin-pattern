在学习设计模式之前,还是很有必要回顾一下UML的。因为设计模式作为软件架构设计的指导原则，所关注的无非是类间关系。而通过UML图，对事物类之间的关系进行建模，能够很好帮助我们梳理和认识这些复杂的关系。而且，后续的系列文章为了便于分析类间关系，也大量的使用了这些类图，所以今天我们做一个简单的回顾：

### UML基础知识

UML（Unified Modeling Language）统一建模语言。它是一个支持模型化和软件系统开发的图形化语言，为软件开发的所有阶段提供模型化和可视化支持，包括由需求分析到规格，到构造和配置。目前UML主要包括13种图，这包括UML2.0在原有的基础上增加的4种。

<img src="https://cdn.jsdelivr.net/gh/hellolsk/imageSource//imageblog/20210131104206.png" alt="UML2.0定义的13种图" style="zoom:80%;" />

如你所见，上面列举了所有的图例。但是，常用的一般有：

**类图**：比如阅读代码，想要快速知道类间的调用关系等；

**用例图**：这在需求分析中几乎是必备，它强调的是和用户交互的这个过程；

**包图**，**时序图**等，也是在各种课程设计中比较常用。

我们主要说一下UML定义的事务中的六大关系:

<img src="https://cdn.jsdelivr.net/gh/hellolsk/imageSource//imageblog/20210131171741.png" alt="UML中定义的类间关系" style="zoom:80%;" />

**说明：**

- 关联是一种拥有关系，表示一个类知道另一个类的属性或方法。它用直线表示，当我们不特意强调实体间

  的关系时可以省略箭头（默认）。还比如老师与学生是双向关联，老师有多名学生，学生也可能有多名老师。但学生与某课程间的关系为单向关联，一名学生可能要上多门课程，课程是个抽象的东西他不拥有学生。

- 聚合和组合都是表示整体与部分的关系，但组合的两个实体具有相同的生命周期，是种共生关系，具有强依赖，而聚合是弱依赖。比如人和手就是组合关系，手只能是自己的；部门和员工就是聚合关系，员工可以脱离部门而存在。


- 泛化其实就是继承，子类继承父类；实现就是类实现接口。


- 依赖关系是一种使用关系，即一个类的实现需要另一个类的协助，所以尽量不使用双向的互相依赖。


六种关系的强弱顺序：

>泛化（继承）>实现>组合>聚合>关联>依赖

也就是说，在设计类间关系时，我们优先从后往前选择，因为关系弱的组合方式更利于程序解耦。最常见的技巧就是，我们应该优先使用组合的方式而不是继承。“组合不会强制设计继承层次结构，而且组合更加灵活，因为可以动态地选择类型（因而选择相应的行为），而继承要求必须在编译时知道确切类型。”

最后，我们采用一张图的模式来梳理六种关系：

<img src="https://cdn.jsdelivr.net/gh/hellolsk/imageSource//imageblog/20210131170821.png" alt="车的抽象类构造" style="zoom:80%;" />

1. 车的类图结构为<>，表示车是一个抽象类；
2. 它有两个实现类：小汽车和自行车；它们之间的关系为实现关系，使用带空心箭头的虚线表示；
3. 小汽车为与SUV之间是泛化关系，也即继承关系，使用带空心箭头的实线表示；
4. 小汽车与发动机之间是组合关系，使用带实心箭头的实线表示；
5. 学生与班级之间是聚合关系，学生是班级的一部分，使用带空心箭头的实线表示；
6. 学生与身份证之间为关联关系，且是1对1关系，使用一根实线表示；
7. 学生上学需要用到自行车，与自行车是一种依赖关系，使用带箭头的虚线表示。

> 参考链接：[https://blog.csdn.net/u013777351/article/details/48310655](https://blog.csdn.net/u013777351/article/details/48310655)

